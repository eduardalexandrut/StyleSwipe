<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <link href="../style/style.css" rel="stylesheet">
</head>
<body>
    <!--Header-->    
        <header>
            <h2>StyleSwipe</h2>
            <a class="" href="login.html">Log Out</a>
        </header>
                <nav>
                    <ul>
                        <li>
                            <i class="bi-house"></i>
                            <a href="home.html">Home</a>
                        </li>
                        <li>
                            <i class="bi-search"></i>
                            <a href="#">Search</a>
                        </li>
                        <li>
                            <i class="bi-plus-circle"></i>
                            <a href="create.html">New Outfit</a>
                        </li>
                        <li>
                            <i class="bi-bell"></i>
                            <a href="notifications.html">Notifications</a>
                        </li>
                        <li>
                            <i class="bi-person"></i>
                            <a href="profile.html">Profile</a>
                        </li>
                    </ul>
                </nav>

                <main>
                    <h1>New Outfit</h1>
                    <!--Image Picker-->
                    <section>
                        <input type="file" accept="image/*" class="d-none" id="selectedFile" onchange="previewImg()"/>
                        <input type="button" value="Select Photo +"  onclick="document.getElementById('selectedFile').click();" />
                    </section>
                    <!--Items Table-->
                    <h3>Items</h3>
                    <div class="container-fluid table-responsive">
                        <table class="table table-striped table-hover">
                            <tr>
                                <th scope="col">Name</th>
                                <th scope="col">Brand</th>
                                <th scope="col">Link</th>
                                <th scope="col">Size</th>
                                <th scope="col">Price</th>
                                <th scope="col"></th>
                            </tr>
                            <tr>
                                <td>Lorem</td>
                                <td>Lorem</td>
                                <td>Lorem</td>
                                <td>Lorem</td>
                                <td>Lorem</td>
                                <td>cc</td>
                            </tr>
                        </table>
                    </div>
                </main><aside>
                    <section>
                        <img src="../img/outfit.jpeg" alt=""/>
                        <ul>
                            <li><h4>@username</h4></li>
                            <li><p id="dateTime"></p></li>
                        </ul> 
                    </section>
                    <form action="#" method="post" class="post">
                        <textarea  placeholder="Add a description..."></textarea>
                        <input  type="submit" value="Add Post"/>
                        <input  type="button" value="Discard"/>
                    </form>
                </aside>
                <!--Modal-->
                <div class="modal fade" id="addItemModal">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-body">
                                <h3>Component Info</h3>
                                <div class="form-floating mb-3">
                                    <input class="form-control" id="itemName" type="text" value="" name="link" placeholder="Name"/>
                                    <label for="itemName">Name</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input class="form-control" id="itemBrand" type="text" value="" name="link" placeholder="Brand"/>
                                    <label for="itemBrand">Brand</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input class="form-control" id="itemLink" type="text" value="" name="link" placeholder="Link"/>
                                    <label for="itemLink">Link</label>
                                </div>
                                <div class="row">
                                    <div class="form-floating mb-3 col-6">
                                        <input class="form-control" id="itemPrice" type="text" value="" name="link" placeholder="Price"/>
                                        <label for="itemPrice">Price</label>
                                    </div>
                                    <div class="form-floating mb-3 col-6">
                                        <input class="form-control" id="itemSize" type="text" value="" name="link" placeholder="Size"/>
                                        <label for="itemSize">Size</label>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <input type="button" value="Add"/>
                                    <input type="button" data-bs-dismiss="modal" value="Discard">

                                </div>

                            </div>
                        </div>
                    </div>
                 </div>
    <script>
        class Pin {
            x;
            y;
        
            constructor(x, y) {
                this.x = x;
                this.y = y;
            }
        };
        const imgInput = document.getElementById('selectedFile');
        const image = document.createElement('img');
        const pins = [];
        const canvas = document.createElement('canvas');
        let ctx = canvas.getContext("2d");

        /*Event listener to draw the selected image on the canavs element, once it is loaded.*/
        image.addEventListener("load",()=> {ctx.drawImage(image,1,1,489,489);},false);
        canvas.addEventListener("click", (e)=>addCircle(e.clientX, e.clientY), false);
        canvas.style = "width:380px; height:500px; border-radius:30px;";
        canvas.setAttribute("data-bs-toggle","modal");
        canvas.setAttribute("data-bs-target","#addItemModal");

        
        /*Function to create a displayable image selected by the user.*/
        function previewImg() {
            let [file] = imgInput.files;
            if (file) {
                image.src = URL.createObjectURL(file);
                document.querySelector("main > section").appendChild(canvas);
                document.querySelector("main>section input[type='button']").style="display:none;"
            }
        }

        /*Function to create and draw the pins on the selected image.*/
        function addCircle(x, y) {
            ctx.beginPath();
            ctx.arc(x, y, 5, 0 , 2*Math.PI);
            ctx.strokeStyle="red";
            ctx.fillStyle="blue";
            ctx.stroke();
            ctx.fill();
            let pin = new Pin(x, y);
            pins.push(pin);
            console.log(pin);
        }

        /*Code to inject current date in #dateTime*/
        let now = new Date();
        let date = now.toLocaleString();
        document.getElementById("dateTime").innerHTML = date;
        
       
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
<!--
    TO DO:
    .Nav:
    -Add animations on hover
    -Change style on selected link

    .Create:
    - Add more margin between elements.
    - Add trash icons to the table.
    - Add canvas instead of section
    - Add js code to add pins
    - Add modal for pins
    - Add js code to add rows in the table
    - Add js to delete pins and tables
    - Add php tp create post instance

    .Home: 
    - Add search page with animation

-->